<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Just a Question</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  background:radial-gradient(circle at top,#ffeef6,#ffd6e7);
  font-family:system-ui,sans-serif;
  padding:16px;
  overflow:hidden;
}
.card{
  width:min(720px,92vw);
  background:#ffffffcc;
  padding:28px;
  border-radius:22px;
  text-align:center;
  box-shadow:0 18px 60px rgba(0,0,0,.15);
}
.art{
  width:380px;
  margin:0 auto 12px;
  display:block;
  transition:transform .4s ease;
}
.bounce{
  animation:bounce .8s ease infinite alternate;
}
@keyframes bounce{
  from{transform:translateY(0)}
  to{transform:translateY(-14px)}
}
.hug{
  transform:scale(1.05);
}
h1{
  font-size:clamp(22px,4vw,38px);
  min-height:3em;
}
.zone{
  position:relative;
  height:120px;
  margin-top:16px;
}
button{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  border:none;
  border-radius:999px;
  cursor:pointer;
  box-shadow:0 10px 24px rgba(0,0,0,.14);
}
.yes{
  left:12%;
  padding:20px 42px;
  font-size:21px;
  font-weight:800;
  background:#ff3b7a;
  color:#fff;
}
.no{
  left:62%;
  padding:10px 18px;
  font-size:14px;
  background:#e5e7eb;
}
.hint{
  font-size:13px;
  opacity:.7;
  margin-top:6px;
}
.sticker{
  width:150px;
  margin:16px auto;
  display:none;
  border-radius:14px;
}
.result{
  display:none;
  margin-top:16px;
}
#confetti{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9999;
}
</style>
</head>

<body>
<canvas id="confetti"></canvas>

<div class="card">

<!-- TEDDY -->
<svg class="art" id="teddy" viewBox="0 0 300 260" xmlns="http://www.w3.org/2000/svg">
  <path d="M150 60 C150 40 180 40 180 65
           C180 95 150 105 150 120
           C150 105 120 95 120 65
           C120 40 150 40 150 60Z" fill="#ff4d7d"/>
  <circle cx="150" cy="155" r="65" fill="#d2a679"/>
  <circle cx="105" cy="105" r="22" fill="#d2a679"/>
  <circle cx="195" cy="105" r="22" fill="#d2a679"/>
  <circle cx="135" cy="150" r="5"/>
  <circle cx="165" cy="150" r="5"/>
  <circle cx="150" cy="165" r="6" fill="#5b3a1e"/>
  <path d="M138 175 Q150 185 162 175"
        stroke="#5b3a1e" stroke-width="3" fill="none"/>
</svg>

<h1 id="text">Hey Yukti‚Ä¶ how are you?</h1>

<img src="sticker.jpg" id="sticker" class="sticker">

<div class="zone" id="zone">
  <button class="yes" id="yesBtn">Fine</button>
  <button class="no" id="noBtn">Not fine</button>
</div>

<div class="hint" id="hint">The other option seems a bit shy üòè</div>

<div class="result" id="result">
  <h2>YAY! Maaru baby üòå‚ú®<br>Wallah habibi, good choice üíõ</h2>
  <img src="https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif" width="260">
</div>

</div>

<script>
const text = document.getElementById("text");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const zone = document.getElementById("zone");
const hint = document.getElementById("hint");
const sticker = document.getElementById("sticker");
const teddy = document.getElementById("teddy");
const result = document.getElementById("result");

const steps = [
  ["Hey Yukti‚Ä¶ how are you?","Fine","Not fine"],
  ["Can I make it better?","Maybe","Try"],
  ["Will you be my Valentine?","Yes","Let‚Äôs see"],
  ["Are you sure?","Yes","No"],
  ["Soch lo‚Ä¶ last chance üòå"],
  ["Achi baat hai ki aap sure ho, huh üòå"],
  ["One last time‚Ä¶\nMrs. Yukti Kotak, will you be my Valentine?","Haanji baby","Akcueiwjsoqkw"]
];

const teasing = [
  "You didn‚Äôt even take a second‚Ä¶ interesting üëÄ",
  "That level of confidence is a little dangerous üòè",
  "Good thing I‚Äôm prepared, or I‚Äôd be blushing already üòå",
  "Alright‚Ä¶ now it‚Äôs my turn to smile."
];

let step = 0;

function next(){
  step++;
  if(step >= steps.length) return;

  text.innerText = steps[step][0];

  if(steps[step].length > 1){
    zone.style.display = "block";
    yesBtn.innerText = steps[step][1];
    noBtn.innerText = steps[step][2];
    return;
  }

  zone.style.display = "none";

  if(step === 4){
    setTimeout(next, 1200);
    return;
  }

  if(step === 5){
    teddy.classList.add("bounce","hug");
    sticker.style.display = "block";
    setTimeout(()=>{
      sticker.style.display = "none";
      startTeasing();
    },3000);
  }
}

function startTeasing(){
  let i = 0;
  const timer = setInterval(()=>{
    if(i < teasing.length){
      text.innerText = teasing[i++];
    } else {
      clearInterval(timer);
      showFinalQuestion();
    }
  },2000);
}

function showFinalQuestion(){
  step++;
  text.innerText = steps[step][0];
  zone.style.display = "block";
  yesBtn.innerText = steps[step][1];
  noBtn.innerText = steps[step][2];
}

function handleFinalClick(){
  zone.style.display = "none";
  hint.style.display = "none";
  finish();
}

yesBtn.onclick = () => {
  if(step === steps.length - 1){
    handleFinalClick();
  } else {
    next();
  }
};

noBtn.onclick = () => {
  if(step === steps.length - 1){
    handleFinalClick();
  } else {
    next();
  }
};

zone.addEventListener("pointermove", e=>{
  const b = noBtn.getBoundingClientRect();
  const d = Math.hypot(
    (b.left+b.width/2)-e.clientX,
    (b.top+b.height/2)-e.clientY
  );
  if(d < 120){
    noBtn.style.left = Math.random()*60 + "%";
  }
});

const confettiFx = confetti.create(document.getElementById("confetti"),{resize:true});

function finish(){
  result.style.display = "block";
  const end = Date.now() + 2600;

  (function fireworks(){
    confettiFx({
      particleCount:14,
      spread:120,
      startVelocity:45,
      ticks:200,
      gravity:0.9,
      shapes:["heart"],
      colors:["#ff4d7d","#ffd1e8","#ffffff"],
      origin:{
        x:Math.random(),
        y:Math.random()*0.6
      }
    });
    if(Date.now() < end) requestAnimationFrame(fireworks);
  })();
}
</script>

</body>
</html>

